\chapter{Scripting API}
\label{ch:ScriptingAPI}

Interation with Stellarium-specific functionality is done by calling the \textbf{public slots} of instances of a group of Stellarium's core classes.

\section{core}
\label{sec:ScriptingAPI:core}
Provide script API for Stellarium global functions.

\subsection{void core.clear(QString state)}
\label{sec:ScriptingAPI:core:clear}
Clear the display options, setting a ``standard'' view.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{state}] the name of a preset state.
\end{description}

\paragraph{Preset states}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\keymap{natural}] azimuthal mount, atmosphere, landscape, no lines, labels or markers
\item[\keymap{starchart}] equatorial mount, constellation lines, no landscape, atmosphere etc. labels and markers on.
\item[\keymap{deepspace}] like starchart, but no planets, no eq.grid, no markers, no lines.
\item[\keymap{galactic}] like deepspace, but in galactic coordinate system.
\end{description}

\paragraph{Default value}
Default value of parameter is \keymap{natural}.

\subsection{void core.debug(QString s)}
\label{sec:ScriptingAPI:core:debug}
Print a debugging message to the console.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{s}] the message to be displayed on the console.
\end{description}

\subsection{void core.dropSound(QString id)}
\label{sec:ScriptingAPI:core:dropSound}
Drop a sound from memory. You should do this before the end of your script.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{id}] the message to be displayed on the consolethe identifier used when loadSound was called.
\end{description}

\subsection{void core.dropVideo(QString id)}
\label{sec:ScriptingAPI:core:dropVideo}
Drop a video from memory. You should do this before the end of your script.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{id}] the identifier used when loadVideo() was called.
\end{description}

\subsection{void core.exit()}
\label{sec:ScriptingAPI:core:exit}
Stop the script.

\subsection{QStringList core.getAllSkyCultureIDs()}
\label{sec:ScriptingAPI:core:getAllSkyCultureIDs}
Get a list of Sky Culture IDs.

\paragraph{Returns}
A list of valid sky culture IDs.

\subsection{QString core.getAppLanguage()}
\label{sec:ScriptingAPI:core:getAppLanguage}
Get the current application language.

\paragraph{Returns}
Two letter language code, e.g. ``en'', or ``de'' and so on.

\subsection{QString core.getDate(QString spec)}
\label{sec:ScriptingAPI:core:getDate}
Get the simulation date and time as a string in ISO format, e.g. ``2008-03-24T13:21:01''

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{spec}] if \keymap{utc}, the returned string's timezone is UTC, else it is local time.
\end{description}

\paragraph{Default value}
Default value of parameter is \keymap{utc}.

\subsection{QString core.getDeltaT()}
\label{sec:ScriptingAPI:core:getDeltaT}
Get the $\Delta T$ for the simulation date and time as a string in HMS format, e.g. ``0h1m68.2s''

\paragraph{Returns}
The $\Delta T$ for current simulation time.

\subsection{QString core.getDeltaTAlgorithm()}
\label{sec:ScriptingAPI:core:getDeltaTAlgorithm}
Get the $\Delta T$ equation name for the simulation date and time as a string.

\paragraph{Returns}
Name of the $\Delta T$ equation.

\subsection{bool core.getDiskViewport()}
\label{sec:ScriptingAPI:core:getDiskViewport}
Get the status of the disk viewport.

\paragraph{Returns}
A \keymap{true} if the disk view port is currently enabled.

\subsection{bool core.getFlagGravityLabels()}
\label{sec:ScriptingAPI:core:getFlagGravityLabels}
Get the current status of the gravity labels option.

\paragraph{Returns}
A \keymap{true} if gravity labels are enabled, else \keymap{false}.

\subsection{double core.getJDay()}
\label{sec:ScriptingAPI:core:getJDay}
Get the current date as Julian Day number.

\paragraph{Returns}
The Julian Day number.

\subsection{float core.getMaxFps()}
\label{sec:ScriptingAPI:core:getMaxFps}
Get the current maximum frames per second.

\paragraph{Returns}
The current maximum frames per secon setting.

\subsection{double core.getMilkyWayIntensity()}
\label{sec:ScriptingAPI:core:getMilkyWayIntensity}
Get Milky Way intensity.

\paragraph{Returns}
Value of Milky Way intensity, e.g. ``1.2''.

\subsection{float core.getMinFps()}
\label{sec:ScriptingAPI:core:getMinFps}
Get the current minimum frames per second.

\paragraph{Returns}
The current minimum frames per secon setting.

\subsection{double core.getMJDay()}
\label{sec:ScriptingAPI:core:getMJDay}
Get the current date as Modified Julian Day.

\paragraph{Returns}
The Modified Julian Day.

\subsection{QString core.getMountMode()}
\label{sec:ScriptingAPI:core:getMountMode}
Get the mount mode as a string.

\paragraph{Returns}
An ``equatorial'' or ``azimuthal''.

\subsection{bool core.getNightMode()}
\label{sec:ScriptingAPI:core:getNightMode}
Get the current status of Night Mode.

\paragraph{Returns}
A \texttt{true} if night mode is currently set.

\subsection{QVariantMap core.getObjectInfo(QString name)}
\label{sec:ScriptingAPI:core:getObjectInfo}
Fetch a map with data about an object's position, magnitude and so on.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{name}] is the English name of the object for which data will be returned.
\end{description}

\paragraph{Returns}
A map of object data. Keys:
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\keymap{altitude}] apparent altitude angle in decimal degrees;
\item[\keymap{azimuth}] apparent azimuth angle in decimal degrees;
\item[\keymap{altitude-geometric}] geometric altitude angle in decimal degrees;
\item[\keymap{azimuth-geometric}] geometric azimuth angle in decimal degrees;
\item[\keymap{ra}] right ascension angle (current date frame) in decimal degrees;
\item[\keymap{dec}] declination angle (current date frame) in decimal degrees;
\item[\keymap{raJ2000}] right ascension angle (J2000 frame) in decimal degrees;
\item[\keymap{decJ2000}] declination angle (J2000 frame) in decimal degrees;
\item[\keymap{glong}] galactic longitude in decimal degrees;
\item[\keymap{glat}] galactic latitude in decimal degrees;
\item[\keymap{elong}] ecliptic longitude in decimal degrees\footnote[1]{On Earth only!};
\item[\keymap{elat}] ecliptic latitude in decimal degrees\footnotemark[1];
\item[\keymap{elongJ2000}] ecliptic longitude (J2000 frame) in decimal degrees\footnotemark[1];
\item[\keymap{elatJ2000}] ecliptic latitude (J2000 frame) in decimal degrees\footnotemark[1];
\item[\keymap{vmag}] visual magnitude;
\item[\keymap{vmage}] visual magnitude (extincted);
\item[\keymap{size}] angular size in radians;
\item[\keymap{size-dd}] angular size in decimal degrees;
\item[\keymap{size-deg}] angular size in decimal degrees (formatted string);
\item[\keymap{size-dms}] angular size in DMS format;
\item[\keymap{localized-name}] localized name;
\item[\keymap{distance}] distance to object in AU\footnote[2]{For Solar system objects only!};
\item[\keymap{phase}] phase of object\footnotemark[2];
\item[\keymap{illumination}] phase of object in percentages\footnotemark[2];
\item[\keymap{phase-angle}] phase angle of object in radians\footnotemark[2];
\item[\keymap{phase-angle-dms}] phase angle of object in DMS\footnotemark[2];
\item[\keymap{phase-angle-deg}] phase angle of object in decimal degrees\footnotemark[2];
\item[\keymap{elongation}] elongation of object in radians\footnotemark[2];
\item[\keymap{elongation-dms}] elongation of object in DMS\footnotemark[2];
\item[\keymap{elongation-deg}] elongation of object in decimal degrees\footnotemark[2].
\end{description}

\subsection{QString core.getObserverLocation()}
\label{sec:ScriptingAPI:core:getObserverLocation}
Get the ID of the current observer location.

\subsection{QVariantMap core.getObserverLocationInfo()}
\label{sec:ScriptingAPI:core:getObserverLocationInfo}
Get the info of the current observer location.

\paragraph{Returns}
A map of object data. Keys:
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\keymap{altitude}] altitude in meters;
\item[\keymap{longitude}] longitude in decimal degrees;
\item[\keymap{latitude}] latitude in decimal degrees;
\item[\keymap{planet}] name of planet;
\item[\keymap{location}] city and country;
\item[\keymap{sidereal-year}] duration of the sidereal year on the planet in Earth's days;
\item[\keymap{sidereal-day}] duration of the sidereal day on the planet in Earth's hours;
\item[\keymap{solar-day}] duration of the mean solar day on the planet in Earth's hours;
\item[\keymap{local-sidereal-time}] local sidereal time on the planet in hours;
\item[\keymap{local-sidereal-time-hms}] local sidereal time on the planet in hours in HMS format.
\end{description}

\subsection{QString core.getProjectionMode()}
\label{sec:ScriptingAPI:core:getProjectionMode}
Get the current projection mode ID string.

\paragraph{Returns}
The string which identifies the current projection mode. For a list of possibl results, see section \ref{sec:ScriptingAPI:core:setProjectionMode()}.

\subsection{int core.getScreenHeight()}
\label{sec:ScriptingAPI:core:getScreenHeight}
Get the screen height (actually, height of Stellarium main view) in pixels.

\paragraph{Returns}
The screen height in pixels.

\subsection{int core.getScreenWidth()}
\label{sec:ScriptingAPI:core:getScreenWidth}
The screen width (actually, width of Stellarium main view) in pixels

\paragraph{Returns}
Get the screen width in pixels.

\subsection{QVariantMap core.getScreenXYFromAltAzi(QString altitude, QString azimuth)}
\label{sec:ScriptingAPI:core:getScreenXYFromAltAzi}
Get screen coordinates from some specified altitude and azimuth angles may be specified in a format recognised by \href{http://www.stellarium.org/doc/head/namespaceStelUtils.html#acd88f8194549c7d46656952428720427}{StelUtils::getDecAngle()}.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{altitude}] the altitude angle;
\item[\parameter{azimuth}] the azimuth angle;
\end{description}

\paragraph{Returns}
A map of object data. Keys:
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\keymap{x}] x coordinate on the screen;
\item[\keymap{y}] y coordinate on the screen;
\end{description}

\subsection{double core.getScriptRate()}
\label{sec:ScriptingAPI:core:getScriptRate}
Get the script execution rate as a multiple of normal execution speed.

\paragraph{Returns}
The current script execution rate.

\subsection{QVariantMap core.getSelectedObjectInfo()}
\label{sec:ScriptingAPI:core:getSelectedObjectInfo}
Fetch a map with data about an latest selected object's position, magnitude and so on.
\paragraph{Returns}
A map of object data. Keys:
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\keymap{altitude}] apparent altitude angle in decimal degrees;
\item[\keymap{azimuth}] apparent azimuth angle in decimal degrees;
\item[\keymap{altitude-geometric}] geometric altitude angle in decimal degrees;
\item[\keymap{azimuth-geometric}] geometric azimuth angle in decimal degrees;
\item[\keymap{ra}] right ascension angle (current date frame) in decimal degrees;
\item[\keymap{dec}] declination angle (current date frame) in decimal degrees;
\item[\keymap{raJ2000}] right ascension angle (J2000 frame) in decimal degrees;
\item[\keymap{decJ2000}] declination angle (J2000 frame) in decimal degrees;
\item[\keymap{glong}] galactic longitude in decimal degrees;
\item[\keymap{glat}] galactic latitude in decimal degrees;
\item[\keymap{elong}] ecliptic longitude in decimal degrees\footnote[1]{On Earth only!};
\item[\keymap{elat}] ecliptic latitude in decimal degrees\footnotemark[1];
\item[\keymap{elongJ2000}] ecliptic longitude (J2000 frame) in decimal degrees\footnotemark[1];
\item[\keymap{elatJ2000}] ecliptic latitude (J2000 frame) in decimal degrees\footnotemark[1];
\item[\keymap{vmag}] visual magnitude;
\item[\keymap{vmage}] visual magnitude (extincted);
\item[\keymap{size}] angular size in radians;
\item[\keymap{size-dd}] angular size in decimal degrees;
\item[\keymap{size-deg}] angular size in decimal degrees (formatted string);
\item[\keymap{size-dms}] angular size in DMS format;
\item[\keymap{localized-name}] localized name;
\item[\keymap{distance}] distance to object in AU\footnote[2]{For Solar system objects only!};
\item[\keymap{phase}] phase of object\footnotemark[2];
\item[\keymap{illumination}] phase of object in percentages\footnotemark[2];
\item[\keymap{phase-angle}] phase angle of object in radians\footnotemark[2];
\item[\keymap{phase-angle-dms}] phase angle of object in DMS\footnotemark[2];
\item[\keymap{phase-angle-deg}] phase angle of object in decimal degrees\footnotemark[2];
\item[\keymap{elongation}] elongation of object in radians\footnotemark[2];
\item[\texttt{elongation-dms}] elongation of object in DMS\footnotemark[2];
\item[\keymap{elongation-deg}] elongation of object in decimal degrees\footnotemark[2].
\end{description}

\subsection{QString core.getSkyCulture()}
\label{sec:ScriptingAPI:core:getSkyCulture}
Find out the current sky culture.

\paragraph{Returns}
The ID of the current sky culture (i.e. the name of the directory in which the curret sky cultures files are found, e.g. ``western'').

\subsection{QString core.getSkyCultureName()}
\label{sec:ScriptingAPI:core:getSkyCultureName}
Find out the current sky culture and get it English name.

\paragraph{Returns}
The English name of the current sky culture.

\subsection{QString core.getSkyCultureNameI18n()}
\label{sec:ScriptingAPI:core:getSkyCultureNameI18n}
Find out the current sky culture and get it localized name.

\paragraph{Returns}
The translated name of the current sky culture.

\subsection{QString core.getSkyLanguage()}
\label{sec:ScriptingAPI:core:getSkyLanguage}
Get the current sky language.

\paragraph{Returns}
Two letter language code, e.g. ``en'', or ``de'' and so on.

\subsection{double core.getTimeRate()}
\label{sec:ScriptingAPI:core:getTimeRate}
Get simulation time rate.

\paragraph{Returns}
time speed as a multiple of real time.

\subsection{qint64 core.getVideoDuration(QString id)}
\label{sec:ScriptingAPI:core:getVideoDuration}
Get the duration of a loaded video, or -1.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{id}] the identifier used when loadVideo() was called.
\end{description}

\subsection{qint64 core.getVideoPosition(QString id)}
\label{sec:ScriptingAPI:core:getVideoPosition}
Get the current position of a loaded video, or -1.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{id}] the identifier used when loadVideo() was called.
\end{description}

\subsection{double core.getViewAltitudeAngle()}
\label{sec:ScriptingAPI:core:getViewAltitudeAngle}
Get the current viewing direction altitude angle at center of view.

\paragraph{Returns}
The altitude angle in decimal degrees. 0 is horizon, zenith is 180, nadir = -180.

\subsection{double core.getViewAzimuthAngle()}
\label{sec:ScriptingAPI:core:getViewAzimuthAngle}
Get the current viewing direction azimuth angle at center of view.

\paragraph{Returns}
The azimuth angle in decimal degrees as a compass bearing i.e. 0 is North, 90 is East, 180 is South, 270 is West.

\subsection{double core.getViewDecAngle()}
\label{sec:ScriptingAPI:core:getViewDecAngle}
Get the current viewing direction Declination angle at center of view.

\paragraph{Returns}
The Declination angle in decimal degrees. The value returned falls in the range -180..180.

\subsection{double core.getViewDecJ2000Angle()}
\label{sec:ScriptingAPI:core:getViewDecJ2000Angle}
Get the current viewing direction Declination angle in J2000 frame at center of view.

\paragraph{Returns}
The Declination angle in J2000 frame in decimal degrees.

\subsection{double core.getViewRaAngle()}
\label{sec:ScriptingAPI:core:getViewRaAngle}
Get the current viewing direction Right Ascension at center of view.

\paragraph{Returns}
The Right Ascension angle in decimal degrees. The value returned falls in the range 0..360.

\subsection{double core.getViewRaJ2000Angle()}
\label{sec:ScriptingAPI:core:getViewRaJ2000Angle}
Get the current viewing direction Right Ascension in J2000 frame at center of view.

\paragraph{Returns}
The Right Ascension angle in J2000 frame in decimal degrees.

\subsection{double core.getZodiacalLightIntensity()}
\label{sec:ScriptingAPI:core:getZodiacalLightIntensity}
Get Zodiacal Light intensity.

\paragraph{Returns}
Value of Zodiacal Light intensity, e.g. ``1.2''.

\subsection{void core.goHome()}
\label{sec:ScriptingAPI:core:goHome}
Go to defaults position and direction of view.

\subsection{bool core.isRealTime()}
\label{sec:ScriptingAPI:core:isRealTime}
Get the simulation time and rate state -- is it ``real time''.

\paragraph{Returns}
A \keymap{true} if the time rate is normal, and the simulation time is real time, else return \keymap{false}.

\subsection{double core.jdFromDateString(QString dt, QString spec)}
\label{sec:ScriptingAPI:core:jdFromDateString}
For use in setDate and waitFor. For parameter descriptions see section~\ref{sec:ScriptingAPI:core:setDate}.

\paragraph{Returns}
Julian day.

\subsection{void core.loadSkyImage(QString id, QString filename, double ra0, double dec0, double ra1, double dec1, double ra2, double dec2, double ra3, double dec3, double minRes, double maxBright, bool visible)}
\label{sec:ScriptingAPI:core:loadSkyImage}
Load an image which will have sky coordinates.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{id}] a string ID to be used when referring to this image (e.g. when changing the displayed status or deleting it.
\item[\parameter{filename}] the file name of the image. If a relative path is specified, ``scripts/'' will be prefixed before the image is searched for using StelFileMgr.
\item[\parameter{ra0}] The right ascension of the first corner of the image in degrees (J2000.0).
\item[\parameter{dec0}] The declination of the first corner of the image in degrees (J2000.0).
\item[\parameter{ra1}] The right ascension of the second corner of the image in degrees (J2000.0).
\item[\parameter{dec1}] 	The declination of the second corner of the image in degrees (J2000.0).
\item[\parameter{ra2}] The right ascension of the third corner of the image in degrees (J2000.0).
\item[\parameter{dec2}] The declination of the third corner of the image in degrees (J2000.0).
\item[\parameter{ra3}] The right ascension of the fourth corner of the image in degrees (J2000.0).
\item[\parameter{dec3}] The declination of the fourth corner of the image in degrees (J2000.0)
\item[\parameter{minRes}] The minimum resolution setting for the image.
\item[\parameter{maxBright}] The maximum brightness setting for the image.
\item[\parameter{visible}] The initial visibility of the image.
\end{description}

\paragraph{Default values}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{minRes}] 2.5
\item[\parameter{maxBright}] 14
\item[\parameter{visible}] true
\end{description}

\subsection{void core.loadSkyImage(QString id, QString filename, QString ra0, QString dec0, QString ra1, QString dec1, QString ra2, QString dec2, QString ra3, QString dec3, double minRes, double maxBright, bool visible)}
\label{sec:ScriptingAPI:core:loadSkyImageStr}
Convenience function which allows the user to provide RA and DEC angles as strings (e.g. ``12d 14m 8s'' or ``5h 26m 8s'' -- formats accepted by StelUtils::getDecAngle()).

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{id}] a string ID to be used when referring to this image (e.g. when changing the displayed status or deleting it.
\item[\parameter{filename}] the file name of the image. If a relative path is specified, ``scripts/'' will be prefixed before the image is searched for using StelFileMgr.
\item[\parameter{ra0}] The right ascension of the first corner of the image in degrees (J2000.0).
\item[\parameter{dec0}] The declination of the first corner of the image in degrees (J2000.0).
\item[\parameter{ra1}] The right ascension of the second corner of the image in degrees (J2000.0).
\item[\parameter{dec1}] 	The declination of the second corner of the image in degrees (J2000.0).
\item[\parameter{ra2}] The right ascension of the third corner of the image in degrees (J2000.0).
\item[\parameter{dec2}] The declination of the third corner of the image in degrees (J2000.0).
\item[\parameter{ra3}] The right ascension of the fourth corner of the image in degrees (J2000.0).
\item[\parameter{dec3}] The declination of the fourth corner of the image in degrees (J2000.0)
\item[\parameter{minRes}] The minimum resolution setting for the image.
\item[\parameter{maxBright}] The maximum brightness setting for the image.
\item[\parameter{visible}] The initial visibility of the image.
\end{description}

\paragraph{Default values}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{minRes}] 2.5
\item[\parameter{maxBright}] 14
\item[\parameter{visible}] true
\end{description}

\subsection{void core.loadSkyImage(QString id, QString filename, double ra, double dec, double angSize, double rotation, double minRes, double maxBright, bool visible)}
\label{sec:ScriptingAPI:core:loadSkyImage1}
Convenience function which allows loading of a sky image based on a central coordinate, angular size and rotation.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{id}] a string ID to be used when referring to this image (e.g. when changing the displayed status or deleting it.
\item[\parameter{filename}] the file name of the image. If a relative path is specified, ``scripts/'' will be prefixed before the image is searched for using StelFileMgr.
\item[\parameter{ra}] The right ascension of the center of the image in J2000 frame degrees.
\item[\parameter{dec}] The declination of the center of the image in J2000 frame degrees.
\item[\parameter{angSize}] The angular size of the image in arc minutes.
\item[\parameter{rotation}] 	The clockwise rotation angle of the image in degrees.
\item[\parameter{minRes}] The minimum resolution setting for the image.
\item[\parameter{maxBright}] The maximum brightness setting for the image.
\item[\parameter{visible}] The initial visibility of the image.
\end{description}

\paragraph{Default values}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{minRes}] 2.5
\item[\parameter{maxBright}] 14
\item[\parameter{visible}] true
\end{description}

\subsection{void core.loadSkyImage(QString id, QString filename, QString ra, QString dec, double angSize, double rotation, double minRes, double maxBright, bool visible)}
\label{sec:ScriptingAPI:core:loadSkyImageStr1}
Convenience function which allows loading of a sky image based on a central coordinate, angular size and rotation. Parameters are the same as the version of this function which takes double values for the ra and dec, except here text expressions of angles may be used.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{id}] a string ID to be used when referring to this image (e.g. when changing the displayed status or deleting it.
\item[\parameter{filename}] the file name of the image. If a relative path is specified, ``scripts/'' will be prefixed before the image is searched for using StelFileMgr.
\item[\parameter{ra}] The right ascension of the center of the image in J2000 frame degrees.
\item[\parameter{dec}] The declination of the center of the image in J2000 frame degrees.
\item[\parameter{angSize}] The angular size of the image in arc minutes.
\item[\parameter{rotation}] 	The clockwise rotation angle of the image in degrees.
\item[\parameter{minRes}] The minimum resolution setting for the image.
\item[\parameter{maxBright}] The maximum brightness setting for the image.
\item[\parameter{visible}] The initial visibility of the image.
\end{description}

\paragraph{Default values}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{minRes}] 2.5
\item[\parameter{maxBright}] 14
\item[\parameter{visible}] true
\end{description}

\subsection{void core.loadSkyImageAltAz(QString id, QString filename, double alt, double azi, double angSize, double rotation, double minRes, double maxBright, bool visible)}
\label{sec:ScriptingAPI:core:loadSkyImageAltAz}
Convenience function which allows loading of a sky image based on a central alt-azimuthal coordinate, angular size and rotation.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{id}] a string ID to be used when referring to this image (e.g. when changing the displayed status or deleting it.
\item[\parameter{filename}] the file name of the image. If a relative path is specified, ``scripts/'' will be prefixed before the image is searched for using StelFileMgr.
\item[\parameter{alt}] The altitude angle of the center of the image in degrees.
\item[\parameter{azi}] The azimuth angle of the center of the image in degrees.
\item[\parameter{angSize}] The angular size of the image in arc minutes.
\item[\parameter{rotation}] 	The clockwise rotation angle of the image in degrees.
\item[\parameter{minRes}] The minimum resolution setting for the image.
\item[\parameter{maxBright}] The maximum brightness setting for the image.
\item[\parameter{visible}] The initial visibility of the image.
\end{description}

\paragraph{Default values}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{minRes}] 2.5
\item[\parameter{maxBright}] 14
\item[\parameter{visible}] true
\end{description}

\subsection{void core.loadSound(QString filename, QString id)}
\label{sec:ScriptingAPI:core:loadSound}
Load a sound from a file.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{filename}] the name of the file to load.
\item[\parameter{id}] the identifier which will be used to refer to the sound when calling playSound, pauseSound, stopSound and dropSound.
\end{description}

\subsection{void core.loadVideo(QString filename, QString id, float x, float y, bool show, float alpha)}
\label{sec:ScriptingAPI:core:loadVideo}
Load a video from a file.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{filename}] the name of the file to load, relative to the scripts directory.
\item[\parameter{id}] the identifier which will be used to refer to the video when calling playVideo(), pauseVideo(), stopVideo(), dropVideo() etc.
\item[\parameter{x}] the x-coordinate (pixels from left) for the video frame.
\item[\parameter{y}] the y-coordinate (pixels from top) for the video frame.
\item[\parameter{show}] the visibility state for the video. (Optional since V0.15) You should load a video with show=true (or leave default), to start it immediately in native size. Else set show=false, and then call resizeVideo(), playVideo() or use playVideoPopout().
\item[\parameter{alpha}] the initial alpha value of the video, defaults to 1.
\end{description}

\paragraph{Default values}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{show}] true
\item[\parameter{alpha}] 1.0
\end{description}

\subsection{void core.moveToAltAzi(QString alt, QString azi, float duration)}
\label{sec:ScriptingAPI:core:moveToAltAzi}
Move the current viewing direction to some specified altitude and azimuth angles may be specified in a format recognised by StelUtils::getDecAngle().

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{alt}] the altitude angle.
\item[\parameter{azi}] the azimuth angle.
\item[\parameter{duration}] the duration of the movement in seconds.
\end{description}

\paragraph{Default value}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{duration}] 1.0
\end{description}

\section{ConstellationMgr}
\label{sec:ScriptingAPI:ConstellationMgr}
Display and manage the constellations. It can display constellations lines, names, art textures and boundaries. It also supports several different sky cultures.

\section{GridLinesMgr}
\label{sec:ScriptingAPI:GridLinesMgr}
The GridLinesMgr controls the drawing of the Azimuthal, Equatorial, Ecliptical and Galactic Grids, as well as the great circles: Meridian Line, Ecliptic Lines of J2000.0 and date, Equator Line (of J2000.0 and date), Precession Circles, and a special line marking conjunction or opposition in ecliptical longitude (of date).

\section{LabelMgr}
\label{sec:ScriptingAPI:LabelMgr}
Allows for creation of custom labels on objects or coordinates. Because this class is intended for use in scripting (although other uses are also fine), all label types and so on are specified by QString descriptions. The labels are painted very late, i.e. also sky object labels will be written over the landscape.

\subsection{int LabelMgr.labelObject(QString text, QString objectName, bool visible, float fontSize, QString fontColor, QString side, double labelDistance, QString style)}
\label{sec:ScriptingAPI:LabelMgr:labelObject}
Create a label which is attached to a StelObject.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{text}] the text to display.
\item[\parameter{objectName}] the English name of the object to attach to.
\item[\parameter{visible}] if \keymap{true}, the label starts displayed, else it starts hidden.
\item[\parameter{fontSize}] size of the font to use.
\item[\parameter{fontColor}] HTML-like color spec, e.g. ``\#ffff00'' for yellow.
\item[\parameter{side}] where the label appears in relation to object: \begin{itemize}
\item ``N'' = above object on screen
\item ``S'' = below object on screen
\item ``E'' = to the right of the object on screen
\item ``W'' = to the left of the object on screen
\item ``NE'', ``NW'', ``SE'', ``SW'' work too.
\end{itemize}
\item[\parameter{labelDistance}] 
\item[\parameter{style}] 
\end{description}

\paragraph{Default values}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{visible}] true
\item[\parameter{fontSize}] 14
\item[\parameter{fontColor}] ``\#999999''
\item[\parameter{side}] ``E''
\item[\parameter{labelDistance}] -1.0
\item[\parameter{style}] ``TextOnly''
\end{description}

\paragraph{Returns}
A unique ID which can be used to refer to the label. returns -1 if the label could not be created (e.g. object not found).

\subsection{int LabelMgr.labelHorizon(QString text, float az, float alt, bool visible, float fontSize, QString fontColor)}
\label{sec:ScriptingAPI:LabelMgr:labelHorizon}
Create a label in azimuthal coordinate system. Can be used e.g. to show landscape features.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{text}] the text to display.
\item[\parameter{az}] azimuth, degrees.
\item[\parameter{alt}] altitude, degrees.
\item[\parameter{visible}] if \keymap{true}, the label starts displayed, else it starts hidden.
\item[\parameter{fontSize}] size of the font to use.
\item[\parameter{fontColor}] HTML-like color spec, e.g. ``\#ffff00'' for yellow.
\end{description}

\subsection{int LabelMgr.labelScreen(QString text, int x, int y, bool visible, float fontSize, QString fontColor)}
\label{sec:ScriptingAPI:LabelMgr:labelScreen}
Create a label at fixed screen coordinates.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{text}] the text to display.
\item[\parameter{x}] the horizontal position on the screen, in pixels, from the left of the screen.
\item[\parameter{y}] the vertical position on the screen, in pixels, from the top of the screen.
\item[\parameter{visible}] if \keymap{true}, the label starts displayed, else it starts hidden.
\item[\parameter{fontSize}] size of the font to use.
\item[\parameter{fontColor}] HTML-like color spec, e.g. ``\#ffff00'' for yellow.
\end{description}

\subsection{bool LabelMgr.getLabelShow(int id)}
\label{sec:ScriptingAPI:LabelMgr:getLabelShow}
Find out if a label identified by id is presently shown.

\subsection{void LabelMgr.setLabelShow(int id, bool show)}
\label{sec:ScriptingAPI:LabelMgr:setLabelShow}
Set a label identified by id to be shown or not.

\subsection{void LabelMgr.setLabelText(int id, QString newText)}
\label{sec:ScriptingAPI:LabelMgr:setLabelText}
Set text of label identified by id to be newText.

\subsection{bool LabelMgr.deleteLabel(int id)}
\label{sec:ScriptingAPI:LabelMgr:deleteLabel}
Delete a label by the ID which was returned from addLabel...

\paragraph{Returns}
A \keymap{true} if the id existed and was deleted, else \keymap{false}

\subsection{int LabelMgr.deleteAllLabels()}
\label{sec:ScriptingAPI:LabelMgr:deleteAllLabels}
Delete all labels.

\paragraph{Returns}
The number of labels deleted.

\section{LandscapeMgr}
\label{sec:ScriptingAPI:LandscapeMgr}
Manages all the rendering at the level of the observer's surroundings. This includes landscape textures, fog, atmosphere and cardinal points. I decided to put all these elements together in a single class because they are inherently linked, especially when we start moving the observer in altitude.

\section{SporadicMeteorMgr}
\label{sec:ScriptingAPI:SporadicMeteorMgr}
Simulates a sporadic meteor shower, with a random color and a random radiant.

\section{NebulaMgr}
\label{sec:ScriptingAPI:NebulaMgr}
Manage a collection of nebulae. This class is used to display the deep-sky catalog with information, and textures for some of them.

\section{ScreenImageMgr}
\label{sec:ScriptingAPI:ScreenImageMgr}
Module for managing images for scripting. Images are identified by a string ID which is passed to ScreenImageMgr members when it is necessary to specify an image to work with. Member functions in this class which modify the state of the class are all mediated through the signal/slot mechanism to ensure such operations happen in the main thread where images are drawn, and not in the script thread.

\section{SolarSystem}
\label{sec:ScriptingAPI:SolarSystem}
This StelObjectModule derivative is used to model SolarSystem bodies. This includes the Major Planets, Minor Planets and Comets.

\section{StarMgr}
\label{sec:ScriptingAPI:StarMgr}

Stores the star catalogue data.

Used to render the stars themselves, as well as determine the color table and render the labels of those stars with names for a given SkyCulture.

The celestial sphere is split into zones, which correspond to the triangular faces of a geodesic sphere. The number of zones (faces) depends on the level of sub-division of this sphere. The lowest level, 0, is an icosahedron (20 faces), subsequent levels, L, of sub-division give the number of zones, n as:

\begin{equation}
n=20 \cdot 4^L
\end{equation}

Stellarium uses levels 0 to 7 in the existing star catalogues. Star Data Records contain the position of a star as an offset from the central position of the zone in which that star is located, thus it is necessary to determine the vector from the observer to the centre of a zone, and add the star's offsets to find the absolute position of the star on the celestial sphere.

This position for a star is expressed as a 3-dimensional vector which points from the observer (at the centre of the geodesic sphere) to the position of the star as observed on the celestial sphere.

\subsection{void StarMgr.setLabelColor(Vec3f c)}
\label{sec:ScriptingAPI:StarMgr:setLabelColor}
Set the color used to label bright stars.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{c}] The color of the bright stars labels.
\end{description}

\noindent Example of usage in scripts:
\begin{script}
StarMgr.setLabelColor(Vec3f(1.0,0.0,0.0));
\end{script}

\subsection{Vec3f StarMgr.getLabelColor()}
\label{sec:ScriptingAPI:StarMgr:getLabelColor}
Get the current color used to label bright stars.

\subsection{void StarMgr.setFlagStars(bool b)}
\label{sec:ScriptingAPI:StarMgr:setFlagStars}
Set display flag for Stars.

\subsection{bool StarMgr.getFlagStars()}
\label{sec:ScriptingAPI:StarMgr:getFlagStars}
Get display flag for Stars.

\subsection{void StarMgr.setFlagLabels(bool b)}
\label{sec:ScriptingAPI:StarMgr:setFlagLabels}
Set display flag for Star names (labels).

\subsection{bool StarMgr.getFlagLabels()}
\label{sec:ScriptingAPI:StarMgr:getFlagLabels}
Get display flag for Star names (labels).

\subsection{void StarMgr.setLabelsAmount(float a)}
\label{sec:ScriptingAPI:StarMgr:setLabelsAmount}
Set the amount of star labels. The real amount is also proportional with FOV. The limit is set in function of the stars magnitude.

\paragraph{Parameters}
\begin{description}[align=right,labelwidth=3cm,leftmargin=3.2cm]
\item[\parameter{a}] the amount between 0 and 10. 0 is no labels, 10 is maximum of labels.
\end{description}

\subsection{float StarMgr.getLabelsAmount()}
\label{sec:ScriptingAPI:StarMgr:getLabelsAmount}
Get the amount of star labels. The real amount is also proportional with FOV.

\paragraph{Returns}
The amount between 0 and 10. 0 is no labels, 10 is maximum of labels.

\subsection{void StarMgr.setFontSize(float newFontSize)}
\label{sec:ScriptingAPI:StarMgr:setFontSize}
Define font size to use for star names display.

\subsection{void StarMgr.setFlagSciNames(bool f)}
\label{sec:ScriptingAPI:StarMgr:setFlagSciNames}
Show scientific or catalog names on stars without common names.

\subsection{bool StarMgr.getFlagSciNames()}
\label{sec:ScriptingAPI:StarMgr:getFlagSciNames}
Get flag for showing a scientific or catalog names on stars without common names.

\section{StelAudioMgr}
\label{sec:ScriptingAPI:StelAudioMgr}

\section{StelVideoMgr}
\label{sec:ScriptingAPI:StelVideoMgr}

A scriptable way to show videos embedded in the screen.

After experimental support with Qt4/Phonon library, this feature is back. Videos can be scaled, paused, placed and relocated (shifted) on screen. Setting opacity seems not to do much unless setting it to zero, the video is then simply invisible. Therefore smooth fading in/out or setting a semitransparent overlay does not work, but there is now an intro/end animation available: zooming out from a pixel position to a player frame position, and returning to that spot close to end of video playback.

However, support for multimedia content depends on the operating system, installed codecs, and completeness of the QtMultimedia system support, so some features or video formats may not work for you (test video and re-code it if necessary).

\section{StelMovementMgr}
\label{sec:ScriptingAPI:StelMovementMgr}

Manages the head movements and zoom operations.

\section{StelSkyDrawer}
\label{sec:ScriptingAPI:StelSkyDrawer}

Provide a set of methods used to draw sky objects taking into account eyes adaptation, zoom level, instrument model and artificially set magnitude limits.

\section{StelSkyLayerMgr}
\label{sec:ScriptingAPI:StelSkyLayerMgr}

Manage the sky background images, including DSS and deep sky objects images.
